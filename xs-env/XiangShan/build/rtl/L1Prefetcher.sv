// Generated by CIRCT firtool-1.62.1
// Standard header to adapt well known macros for register randomization.
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_MEM_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_MEM_INIT
`endif // not def RANDOMIZE
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_

// Include register initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Include rmemory initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_MEM_
    `define ENABLE_INITIAL_MEM_
  `endif // not def ENABLE_INITIAL_MEM_
`endif // not def SYNTHESIS

module L1Prefetcher(
  input         clock,
  input         reset,
  input         io_ld_in_0_valid,
  input         io_ld_in_0_bits_uop_robIdx_flag,
  input  [7:0]  io_ld_in_0_bits_uop_robIdx_value,
  input  [49:0] io_ld_in_0_bits_vaddr,
  input         io_ld_in_0_bits_miss,
  input  [2:0]  io_ld_in_0_bits_meta_prefetch,
  input         io_ld_in_1_valid,
  input         io_ld_in_1_bits_uop_robIdx_flag,
  input  [7:0]  io_ld_in_1_bits_uop_robIdx_value,
  input  [49:0] io_ld_in_1_bits_vaddr,
  input         io_ld_in_1_bits_miss,
  input  [2:0]  io_ld_in_1_bits_meta_prefetch,
  input         io_ld_in_2_valid,
  input         io_ld_in_2_bits_uop_robIdx_flag,
  input  [7:0]  io_ld_in_2_bits_uop_robIdx_value,
  input  [49:0] io_ld_in_2_bits_vaddr,
  input         io_ld_in_2_bits_miss,
  input  [2:0]  io_ld_in_2_bits_meta_prefetch,
  output        io_tlb_req_req_valid,
  output [49:0] io_tlb_req_req_bits_vaddr,
  output [63:0] io_tlb_req_req_bits_fullva,
  output        io_tlb_req_req_bits_checkfullva,
  output [2:0]  io_tlb_req_req_bits_cmd,
  output        io_tlb_req_req_bits_hyperinst,
  output        io_tlb_req_req_bits_hlvx,
  output        io_tlb_req_req_bits_kill,
  output        io_tlb_req_req_bits_isPrefetch,
  output        io_tlb_req_req_bits_no_translate,
  output [47:0] io_tlb_req_req_bits_pmp_addr,
  output        io_tlb_req_req_bits_debug_robIdx_flag,
  output [7:0]  io_tlb_req_req_bits_debug_robIdx_value,
  input         io_tlb_req_resp_valid,
  input  [47:0] io_tlb_req_resp_bits_paddr_0,
  input  [1:0]  io_tlb_req_resp_bits_pbmt_0,
  input         io_tlb_req_resp_bits_miss,
  input         io_tlb_req_resp_bits_excp_0_gpf_ld,
  input         io_tlb_req_resp_bits_excp_0_pf_ld,
  input         io_tlb_req_resp_bits_excp_0_af_ld,
  input         io_pmp_resp_ld,
  input         io_pmp_resp_mmio,
  input         io_l1_req_ready,
  output        io_l1_req_valid,
  output [47:0] io_l1_req_bits_paddr,
  output [1:0]  io_l1_req_bits_alias,
  output        io_l1_req_bits_confidence,
  output        io_l1_req_bits_is_store,
  output [2:0]  io_l1_req_bits_pf_source_value,
  output        io_l2_req_valid,
  output [47:0] io_l2_req_bits_addr,
  output [3:0]  io_l2_req_bits_source,
  output        io_l3_req_valid,
  output [47:0] io_l3_req_bits,
  input         pf_ctrl_enable,
  input         pf_ctrl_confidence,
  input         stride_train_0_valid,
  input  [49:0] stride_train_0_bits_uop_pc,
  input         stride_train_0_bits_uop_robIdx_flag,
  input  [7:0]  stride_train_0_bits_uop_robIdx_value,
  input  [49:0] stride_train_0_bits_vaddr,
  input         stride_train_1_valid,
  input  [49:0] stride_train_1_bits_uop_pc,
  input         stride_train_1_bits_uop_robIdx_flag,
  input  [7:0]  stride_train_1_bits_uop_robIdx_value,
  input  [49:0] stride_train_1_bits_vaddr,
  input         stride_train_2_valid,
  input  [49:0] stride_train_2_bits_uop_pc,
  input         stride_train_2_bits_uop_robIdx_flag,
  input  [7:0]  stride_train_2_bits_uop_robIdx_value,
  input  [49:0] stride_train_2_bits_vaddr
);

  wire        _pf_queue_filter_io_l1_req_valid;
  wire        _pf_queue_filter_io_l2_pf_addr_valid;
  wire [47:0] _pf_queue_filter_io_l2_pf_addr_bits_addr;
  wire        _pf_queue_filter_io_l3_pf_addr_valid;
  wire [47:0] _pf_queue_filter_io_l3_pf_addr_bits;
  wire        _stream_bit_vec_array_io_train_req_ready;
  wire        _stream_bit_vec_array_io_l1_prefetch_req_valid;
  wire [39:0] _stream_bit_vec_array_io_l1_prefetch_req_bits_region;
  wire [15:0] _stream_bit_vec_array_io_l1_prefetch_req_bits_bit_vec;
  wire        _stream_bit_vec_array_io_l2_l3_prefetch_req_valid;
  wire [39:0] _stream_bit_vec_array_io_l2_l3_prefetch_req_bits_region;
  wire [15:0] _stream_bit_vec_array_io_l2_l3_prefetch_req_bits_bit_vec;
  wire [1:0]  _stream_bit_vec_array_io_l2_l3_prefetch_req_bits_sink;
  wire        _stream_train_filter_io_train_req_valid;
  wire [49:0] _stream_train_filter_io_train_req_bits_vaddr;
  wire        _stream_train_filter_io_train_req_bits_miss;
  wire        _stream_train_filter_io_train_req_bits_pfHitStream;
  wire        _stride_meta_array_io_train_req_ready;
  wire        _stride_meta_array_io_l1_prefetch_req_valid;
  wire [39:0] _stride_meta_array_io_l1_prefetch_req_bits_region;
  wire [15:0] _stride_meta_array_io_l1_prefetch_req_bits_bit_vec;
  wire        _stride_meta_array_io_l2_l3_prefetch_req_valid;
  wire [39:0] _stride_meta_array_io_l2_l3_prefetch_req_bits_region;
  wire [15:0] _stride_meta_array_io_l2_l3_prefetch_req_bits_bit_vec;
  wire        _stride_train_filter_io_train_req_valid;
  wire [49:0] _stride_train_filter_io_train_req_bits_vaddr;
  wire [49:0] _stride_train_filter_io_train_req_bits_pc;
  TrainFilter stride_train_filter (
    .clock                            (clock),
    .reset                            (reset),
    .io_ld_in_0_valid                 (stride_train_0_valid),
    .io_ld_in_0_bits_uop_pc           (stride_train_0_bits_uop_pc),
    .io_ld_in_0_bits_uop_robIdx_flag  (stride_train_0_bits_uop_robIdx_flag),
    .io_ld_in_0_bits_uop_robIdx_value (stride_train_0_bits_uop_robIdx_value),
    .io_ld_in_0_bits_vaddr            (stride_train_0_bits_vaddr),
    .io_ld_in_1_valid                 (stride_train_1_valid),
    .io_ld_in_1_bits_uop_pc           (stride_train_1_bits_uop_pc),
    .io_ld_in_1_bits_uop_robIdx_flag  (stride_train_1_bits_uop_robIdx_flag),
    .io_ld_in_1_bits_uop_robIdx_value (stride_train_1_bits_uop_robIdx_value),
    .io_ld_in_1_bits_vaddr            (stride_train_1_bits_vaddr),
    .io_ld_in_2_valid                 (stride_train_2_valid),
    .io_ld_in_2_bits_uop_pc           (stride_train_2_bits_uop_pc),
    .io_ld_in_2_bits_uop_robIdx_flag  (stride_train_2_bits_uop_robIdx_flag),
    .io_ld_in_2_bits_uop_robIdx_value (stride_train_2_bits_uop_robIdx_value),
    .io_ld_in_2_bits_vaddr            (stride_train_2_bits_vaddr),
    .io_train_req_ready               (_stride_meta_array_io_train_req_ready),
    .io_train_req_valid               (_stride_train_filter_io_train_req_valid),
    .io_train_req_bits_vaddr          (_stride_train_filter_io_train_req_bits_vaddr),
    .io_train_req_bits_pc             (_stride_train_filter_io_train_req_bits_pc)
  );
  StrideMetaArray stride_meta_array (
    .clock                              (clock),
    .reset                              (reset),
    .io_train_req_ready                 (_stride_meta_array_io_train_req_ready),
    .io_train_req_valid                 (_stride_train_filter_io_train_req_valid),
    .io_train_req_bits_vaddr            (_stride_train_filter_io_train_req_bits_vaddr),
    .io_train_req_bits_pc               (_stride_train_filter_io_train_req_bits_pc),
    .io_l1_prefetch_req_valid           (_stride_meta_array_io_l1_prefetch_req_valid),
    .io_l1_prefetch_req_bits_region
      (_stride_meta_array_io_l1_prefetch_req_bits_region),
    .io_l1_prefetch_req_bits_bit_vec
      (_stride_meta_array_io_l1_prefetch_req_bits_bit_vec),
    .io_l2_l3_prefetch_req_valid        (_stride_meta_array_io_l2_l3_prefetch_req_valid),
    .io_l2_l3_prefetch_req_bits_region
      (_stride_meta_array_io_l2_l3_prefetch_req_bits_region),
    .io_l2_l3_prefetch_req_bits_bit_vec
      (_stride_meta_array_io_l2_l3_prefetch_req_bits_bit_vec)
  );
  TrainFilter_1 stream_train_filter (
    .clock                            (clock),
    .reset                            (reset),
    .io_ld_in_0_valid                 (io_ld_in_0_valid),
    .io_ld_in_0_bits_uop_robIdx_flag  (io_ld_in_0_bits_uop_robIdx_flag),
    .io_ld_in_0_bits_uop_robIdx_value (io_ld_in_0_bits_uop_robIdx_value),
    .io_ld_in_0_bits_vaddr            (io_ld_in_0_bits_vaddr),
    .io_ld_in_0_bits_miss             (io_ld_in_0_bits_miss),
    .io_ld_in_0_bits_meta_prefetch    (io_ld_in_0_bits_meta_prefetch),
    .io_ld_in_1_valid                 (io_ld_in_1_valid),
    .io_ld_in_1_bits_uop_robIdx_flag  (io_ld_in_1_bits_uop_robIdx_flag),
    .io_ld_in_1_bits_uop_robIdx_value (io_ld_in_1_bits_uop_robIdx_value),
    .io_ld_in_1_bits_vaddr            (io_ld_in_1_bits_vaddr),
    .io_ld_in_1_bits_miss             (io_ld_in_1_bits_miss),
    .io_ld_in_1_bits_meta_prefetch    (io_ld_in_1_bits_meta_prefetch),
    .io_ld_in_2_valid                 (io_ld_in_2_valid),
    .io_ld_in_2_bits_uop_robIdx_flag  (io_ld_in_2_bits_uop_robIdx_flag),
    .io_ld_in_2_bits_uop_robIdx_value (io_ld_in_2_bits_uop_robIdx_value),
    .io_ld_in_2_bits_vaddr            (io_ld_in_2_bits_vaddr),
    .io_ld_in_2_bits_miss             (io_ld_in_2_bits_miss),
    .io_ld_in_2_bits_meta_prefetch    (io_ld_in_2_bits_meta_prefetch),
    .io_train_req_ready               (_stream_bit_vec_array_io_train_req_ready),
    .io_train_req_valid               (_stream_train_filter_io_train_req_valid),
    .io_train_req_bits_vaddr          (_stream_train_filter_io_train_req_bits_vaddr),
    .io_train_req_bits_miss           (_stream_train_filter_io_train_req_bits_miss),
    .io_train_req_bits_pfHitStream    (_stream_train_filter_io_train_req_bits_pfHitStream)
  );
  StreamBitVectorArray stream_bit_vec_array (
    .clock                              (clock),
    .reset                              (reset),
    .io_train_req_ready                 (_stream_bit_vec_array_io_train_req_ready),
    .io_train_req_valid                 (_stream_train_filter_io_train_req_valid),
    .io_train_req_bits_vaddr            (_stream_train_filter_io_train_req_bits_vaddr),
    .io_train_req_bits_miss             (_stream_train_filter_io_train_req_bits_miss),
    .io_train_req_bits_pfHitStream
      (_stream_train_filter_io_train_req_bits_pfHitStream),
    .io_l1_prefetch_req_valid           (_stream_bit_vec_array_io_l1_prefetch_req_valid),
    .io_l1_prefetch_req_bits_region
      (_stream_bit_vec_array_io_l1_prefetch_req_bits_region),
    .io_l1_prefetch_req_bits_bit_vec
      (_stream_bit_vec_array_io_l1_prefetch_req_bits_bit_vec),
    .io_l2_l3_prefetch_req_valid
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_valid),
    .io_l2_l3_prefetch_req_bits_region
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_bits_region),
    .io_l2_l3_prefetch_req_bits_bit_vec
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_bits_bit_vec),
    .io_l2_l3_prefetch_req_bits_sink
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_bits_sink)
  );
  MutiLevelPrefetchFilter pf_queue_filter (
    .clock                                   (clock),
    .reset                                   (reset),
    .io_l1_prefetch_req_valid
      (_stream_bit_vec_array_io_l1_prefetch_req_valid
       | _stride_meta_array_io_l1_prefetch_req_valid),
    .io_l1_prefetch_req_bits_region
      (_stream_bit_vec_array_io_l1_prefetch_req_valid
         ? _stream_bit_vec_array_io_l1_prefetch_req_bits_region
         : _stride_meta_array_io_l1_prefetch_req_bits_region),
    .io_l1_prefetch_req_bits_bit_vec
      (_stream_bit_vec_array_io_l1_prefetch_req_valid
         ? _stream_bit_vec_array_io_l1_prefetch_req_bits_bit_vec
         : _stride_meta_array_io_l1_prefetch_req_bits_bit_vec),
    .io_l1_prefetch_req_bits_source_value
      ({2'h1, _stream_bit_vec_array_io_l1_prefetch_req_valid}),
    .io_l2_l3_prefetch_req_valid
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_valid
       | _stride_meta_array_io_l2_l3_prefetch_req_valid),
    .io_l2_l3_prefetch_req_bits_region
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_valid
         ? _stream_bit_vec_array_io_l2_l3_prefetch_req_bits_region
         : _stride_meta_array_io_l2_l3_prefetch_req_bits_region),
    .io_l2_l3_prefetch_req_bits_bit_vec
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_valid
         ? _stream_bit_vec_array_io_l2_l3_prefetch_req_bits_bit_vec
         : _stride_meta_array_io_l2_l3_prefetch_req_bits_bit_vec),
    .io_l2_l3_prefetch_req_bits_sink
      (_stream_bit_vec_array_io_l2_l3_prefetch_req_valid
         ? _stream_bit_vec_array_io_l2_l3_prefetch_req_bits_sink
         : 2'h1),
    .io_l2_l3_prefetch_req_bits_source_value
      ({2'h1, _stream_bit_vec_array_io_l2_l3_prefetch_req_valid}),
    .io_tlb_req_req_valid                    (io_tlb_req_req_valid),
    .io_tlb_req_req_bits_vaddr               (io_tlb_req_req_bits_vaddr),
    .io_tlb_req_req_bits_fullva              (io_tlb_req_req_bits_fullva),
    .io_tlb_req_req_bits_checkfullva         (io_tlb_req_req_bits_checkfullva),
    .io_tlb_req_req_bits_cmd                 (io_tlb_req_req_bits_cmd),
    .io_tlb_req_req_bits_hyperinst           (io_tlb_req_req_bits_hyperinst),
    .io_tlb_req_req_bits_hlvx                (io_tlb_req_req_bits_hlvx),
    .io_tlb_req_req_bits_kill                (io_tlb_req_req_bits_kill),
    .io_tlb_req_req_bits_isPrefetch          (io_tlb_req_req_bits_isPrefetch),
    .io_tlb_req_req_bits_no_translate        (io_tlb_req_req_bits_no_translate),
    .io_tlb_req_req_bits_pmp_addr            (io_tlb_req_req_bits_pmp_addr),
    .io_tlb_req_req_bits_debug_robIdx_flag   (io_tlb_req_req_bits_debug_robIdx_flag),
    .io_tlb_req_req_bits_debug_robIdx_value  (io_tlb_req_req_bits_debug_robIdx_value),
    .io_tlb_req_resp_valid                   (io_tlb_req_resp_valid),
    .io_tlb_req_resp_bits_paddr_0            (io_tlb_req_resp_bits_paddr_0),
    .io_tlb_req_resp_bits_pbmt_0             (io_tlb_req_resp_bits_pbmt_0),
    .io_tlb_req_resp_bits_miss               (io_tlb_req_resp_bits_miss),
    .io_tlb_req_resp_bits_excp_0_gpf_ld      (io_tlb_req_resp_bits_excp_0_gpf_ld),
    .io_tlb_req_resp_bits_excp_0_pf_ld       (io_tlb_req_resp_bits_excp_0_pf_ld),
    .io_tlb_req_resp_bits_excp_0_af_ld       (io_tlb_req_resp_bits_excp_0_af_ld),
    .io_pmp_resp_ld                          (io_pmp_resp_ld),
    .io_pmp_resp_mmio                        (io_pmp_resp_mmio),
    .io_l1_req_ready                         (~pf_ctrl_enable | io_l1_req_ready),
    .io_l1_req_valid                         (_pf_queue_filter_io_l1_req_valid),
    .io_l1_req_bits_paddr                    (io_l1_req_bits_paddr),
    .io_l1_req_bits_alias                    (io_l1_req_bits_alias),
    .io_l1_req_bits_confidence               (io_l1_req_bits_confidence),
    .io_l1_req_bits_is_store                 (io_l1_req_bits_is_store),
    .io_l1_req_bits_pf_source_value          (io_l1_req_bits_pf_source_value),
    .io_l2_pf_addr_valid                     (_pf_queue_filter_io_l2_pf_addr_valid),
    .io_l2_pf_addr_bits_addr                 (_pf_queue_filter_io_l2_pf_addr_bits_addr),
    .io_l2_pf_addr_bits_source               (io_l2_req_bits_source),
    .io_l3_pf_addr_valid                     (_pf_queue_filter_io_l3_pf_addr_valid),
    .io_l3_pf_addr_bits                      (_pf_queue_filter_io_l3_pf_addr_bits),
    .io_confidence                           (pf_ctrl_confidence)
  );
  assign io_l1_req_valid = _pf_queue_filter_io_l1_req_valid & pf_ctrl_enable;
  assign io_l2_req_valid =
    _pf_queue_filter_io_l2_pf_addr_valid
    & (|(_pf_queue_filter_io_l2_pf_addr_bits_addr[47:31]))
    & _pf_queue_filter_io_l2_pf_addr_bits_addr < 48'h80000000000 & pf_ctrl_enable;
  assign io_l2_req_bits_addr = _pf_queue_filter_io_l2_pf_addr_bits_addr;
  assign io_l3_req_valid =
    _pf_queue_filter_io_l3_pf_addr_valid & (|(_pf_queue_filter_io_l3_pf_addr_bits[47:31]))
    & _pf_queue_filter_io_l3_pf_addr_bits < 48'h80000000000 & pf_ctrl_enable;
  assign io_l3_req_bits = _pf_queue_filter_io_l3_pf_addr_bits;
endmodule

